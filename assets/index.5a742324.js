function s(o){const t=o.getRootNode();return t instanceof ShadowRoot?t.host:o}function u(o){let t;function e(){return t||(t=o()),t}return e}function a(){let o=r=>{},t=()=>{};return{promise:new Promise((r,n)=>{o=r,t=n}),resolve:o,reject:t}}function i(o,t,e){return o().catch(r=>(t--,console.log("[retry promise]",r,t),t===0?r:new Promise(n=>{e?setTimeout(()=>{n(i(o,t,e))},e):n(i(o,t,e))})))}function c(o,t=300){let e=null;return function(...r){e&&window.clearTimeout(e),e=window.setTimeout(()=>{o.apply(this,r),e=null},t)}}class p{constructor(){this.map={}}subscribe(t,e){this.map[t]?this.map[t].push(e):this.map[t]=[e]}unsubscribe(t){delete this.map[t]}emit(t,...e){this.map[t]&&this.map[t].forEach(r=>r.apply(null,e))}}export{p as E,a,u as c,c as d,s as g,i as t};
