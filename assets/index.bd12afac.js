var g=Object.defineProperty;var u=Object.getOwnPropertySymbols;var h=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var p=(s,e,t)=>e in s?g(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t,c=(s,e)=>{for(var t in e||(e={}))h.call(e,t)&&p(s,t,e[t]);if(u)for(var t of u(e))_.call(e,t)&&p(s,t,e[t]);return s};import{_ as n}from"./preload-helper.42c689d6.js";import{c as d,a as w,d as v,t as y}from"./index.5a742324.js";import{R as E,w as j,l as T,m as k}from"./vendor.91e6cab1.js";var L=new URL("/ui-elements/assets/onigasm.b63d2d2d.b63d2d2d.wasm",self.location).href;const D=d(()=>T(L));function M(s){let e=[],t={inherit:!0,base:"vs-dark",colors:s.colors,rules:e,encodedTokensColors:[]};return s.include&&console.log(s.include),s.tokenColors.map(function(o){if(typeof o.scope=="string"){let r=o.scope.split(",");if(r.length>1){o.scope=r,a();return}e.push(Object.assign({},o.settings,{token:o.scope}));return}a();function a(){o.scope&&o.scope.map(function(r){e.push(Object.assign({},o.settings,{token:r}))})}}),t}async function S(s,e){await D();const t=new E({getGrammarDefinition:async a=>({"source.ts":{format:"json",content:(await n(()=>import("./TypeScript.tmLanguage-dde9b4f2.8581f717.js"),[])).default},"source.js":{format:"json",content:(await n(()=>import("./JavaScript.tmLanguage-ff98f423.638a2561.js"),[])).default},"source.css":{format:"json",content:(await n(()=>import("./css.tmGrammar-3709d54b.92079785.js"),[])).default},"source.vuehtml":{format:"json",content:(await n(()=>import("./vuehtml.tmLanguage-43db5540.9c4a5d92.js"),[])).default}})[a]}),o=new Map;o.set("css","source.css"),o.set("typescript","source.ts"),o.set("javascript","source.js"),o.set("vuehtml","source.vuehtml"),s.editor.defineTheme("vscode-dark",M((await n(()=>import("./dark_vs-a2565d03.404ed691.js"),[])).default)),await j(s,t,o,e)}function b(s){const e={noUnusedLocals:!1,noUnusedParameters:!1,allowUnreachableCode:!0,moduleResolution:2,allowUnusedLabels:!0,strict:!1,allowJs:!0,importHelpers:!0,noImplicitUseStrict:!1};s.languages.typescript.typescriptDefaults.setCompilerOptions(c(c({},s.languages.typescript.typescriptDefaults.getCompilerOptions()),e)),s.languages.typescript.javascriptDefaults.setCompilerOptions(c(c({},s.languages.typescript.javascriptDefaults.getCompilerOptions()),e));const t=new Set;return{hasDTS(o){return t.has(o)},addDTS(o){o.forEach(a=>t.add(a.filePath)),s.languages.typescript.typescriptDefaults.setExtraLibs(o),s.languages.typescript.javascriptDefaults.setExtraLibs(o)},deleteDTS(o){const a=s.languages.typescript.typescriptDefaults.getExtraLibs();o.forEach(r=>{delete a[r]}),console.log(a)}}}var O=new URL("/ui-elements/assets/monaco-editor.b433304a.css",self.location).href;const R=d(async()=>{if(typeof window!="undefined"){const s=document.createElement("style");return s.innerHTML=`@import "${O}"`,{monaco:k,style:s}}throw"can not load moncao"}),A={vuehtml:"vuehtml",html:"html",js:"javascript",ts:"typescript",css:"css",json:"json"},P=d(async()=>{const[{},{default:s},{default:e},{default:t},{default:o},{default:a},{default:r}]=await Promise.all([n(()=>import("./monaco.contribution-a2028964.245525d9.js"),["assets/monaco.contribution-a2028964.245525d9.js","assets/preload-helper.42c689d6.js","assets/vendor.91e6cab1.js","assets/vendor.0e80a834.css"]),n(()=>import("./vuehtml.worker-4ac315ec.fe88643d.js"),[]),n(()=>import("./editor.worker.427f8ae0.js"),[]),n(()=>import("./json.worker.cd282449.js"),[]),n(()=>import("./ts.worker.01f132d5.js"),[]),n(()=>import("./css.worker.b97c46c3.js"),[]),n(()=>import("./html.worker.69ca5fed.js"),[])]);window.MonacoEnvironment={getWorker(i,l){switch(console.log("[load worker]",l),l){case"json":return new t;case"vuehtml":return new s;case"html":return new r;case"typescript":case"javascript":return new o;case"css":return new a;default:return new e}}}}),m=d(async()=>{const{monaco:s,style:e}=await R();return await P(),{monaco:s,style:e,typescript:b(s)}});class f extends HTMLElement{constructor(){super();this.monacoAccessor=m(),this.editor=w();const e=this.attachShadow({mode:"open"}),t=this.ownerDocument.createElement("div");t.style.width="inherit",t.style.height="inherit",t.innerHTML='<div id="editor-container" style="width:inherit;height:inherit;"></div>',e.appendChild(t)}get container(){return this.shadowRoot.querySelector("#editor-container")}async connectedCallback(){const{monaco:e,style:t}=await this.monacoAccessor,{container:o}=this;this.shadowRoot.appendChild(t.cloneNode(!0));const a=e.editor.create(o,{tabSize:2,insertSpaces:!0,autoClosingQuotes:"always",detectIndentation:!1,folding:!1,automaticLayout:!0,theme:"vscode-dark",minimap:{enabled:!1},useShadowDOM:!1});a.onDidChangeModel(()=>{const r=a.getModel();!r||(console.log("[monaco-editor] change model"),r.onDidChangeContent(v(async()=>{const i=document.createEvent("events");i.initEvent("code-change",!1,!1),i.value={content:a.getValue()},this.dispatchEvent(i)})))}),this.editor.resolve(a),await S(e,a),e.editor.setTheme("vscode-dark")}disconnectedCallback(){}async createModel(e,t,o){console.log("[monaco-editor] createModel");const{monaco:a}=await this.monacoAccessor;return a.editor.createModel(o||"",A[e],a.Uri.file(`file://${t}`))}setModel(e){console.log("[monaco-editor] setModel"),this.editor.promise.then(t=>{t.setModel(e)})}async findModel(e){const{monaco:t}=await this.monacoAccessor;return t.editor.getModel(t.Uri.file(`file://${e}`))}removeModel(){this.editor.promise.then(e=>{var t;(t=e.getModel())==null||t.dispose()})}}async function U(s){const{monaco:e}=await m(),t=e.Uri.file(`file://${s}`),i=(await(await(await y(()=>e.languages.typescript.getTypeScriptWorker(),3,100))(t)).getEmitOutput(t.toString())).outputFiles.find(l=>l.name.endsWith(".js"));return i&&i.text||""}function x(){window.customElements.get("monaco-editor")||(window.MonacoEditor=f,window.customElements.define("monaco-editor",f))}export{f as MonacoEditor,U as getRunnableJS,x as install};
