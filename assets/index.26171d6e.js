var t,e,r=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},n=(t,e,n)=>(r(t,e,"read from private field"),n?n.call(t):e.get(t)),s=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)};import{g as a}from"./shadow.87af85ed.js";var o=(function(...t){return t})`
<div class="drag-wrap">
  <slot name="item">
</div>
<style>
  .drag-wrap {
    background: #000;
    display: flex;
    justify-content: space-between;
    gap: 10px;
    width: 100%;
    height: 100%;
  }
</style>
`;function i(t,e){t.forEach((t=>{t.style.userSelect=e?"auto":"none"}))}function d(t){const e=t.currentTarget,r=a(e),{items:n,wrap:s,direction:o}=r,d=t=>"row"===o?t.clientX:t.clientY,c=t=>"row"===o?t.clientWidth:t.clientHeight,l=(t,e)=>"row"===o?t.style.width=e:t.style.height=e;i(n,!1);let h=(t=>{const e=c(s),r=function(t,e,r){const n={start:0,end:0};let s=0;for(let a=0;a<e.length;a++){const o=r(e[a]);if(s+=o,s>=t){n.end=a;break}0!==o&&(n.start=a)}return n.start-n.end>=0?n.end=n.start+1:n.end-n.start>1&&(n.start=n.end-1),{start:e[n.start],end:e[n.end]}}((t=>"row"===o?t.offsetX:t.offsetY)(t),n,c),a=c(r.start)+c(r.end),i=c(r.start),l=100*a/e;return{startPostion:d(t),postion:r,maxSize:a,startSize:i,maxPercent:l,wrapSize:e}})(t);const m=t=>{const e=h.startSize+(d(t)-h.startPostion);if(e>h.maxSize||e<0)return;let r=100*e/h.wrapSize;r<2?r=0:r>h.maxPercent-2&&(r=h.maxPercent),l(h.postion.start,r+"%"),l(h.postion.end,h.maxPercent-r+"%")};document.addEventListener("mousemove",m),document.addEventListener("mouseup",(()=>{i(n,!0),document.removeEventListener("mousemove",m)}))}function c(t){t.stopPropagation()}let l=0;class h extends HTMLElement{constructor(){super(),s(this,t,"row"),s(this,e,++l);const r=this.attachShadow({mode:"open"}),a=this.ownerDocument.createElement("div");a.style.width="inherit",a.style.height="inherit",a.innerHTML=o,r.appendChild(a),this.setAttribute("data-index",`${n(this,e)}`)}get direction(){return n(this,t)}get items(){return Array.from(this.querySelectorAll(`[data-index='${n(this,e)}']>[slot='item']`)).filter((t=>!t.hasAttribute("hidden")))}get wrap(){return this.shadowRoot.querySelector(".drag-wrap")}connectedCallback(){this.attributeChangedCallback(),this.updateItems()}disconnectedCallback(){const{wrap:t,items:e}=this;e.forEach((t=>t.removeEventListener("mousedown",c))),t.removeEventListener("mousedown",d)}attributeChangedCallback(){const{wrap:e}=this,s=this.attributes.getNamedItem("direction");var a,o,i,d,c;a=this,o=t,i=s?(c=s.value,["row","column"].includes(c)?c:"row"):"row",r(a,o,"write to private field"),d?d.call(a,i):o.set(a,i),e.style.cursor="row"===n(this,t)?"col-resize":"row-resize",e.style.flexDirection=n(this,t)}updateItems(){const{items:t,wrap:e,direction:r}=this,n=100/t.length+"%";console.log("[drag-wrap] update item"),t.forEach((t=>{t.style.cursor="auto","row"===r?t.style.width=n:t.style.height=n,t.addEventListener("mousedown",c)})),t.length>0&&e.addEventListener("mousedown",d)}}function m(){window.customElements.get("drag-wrap")||(window.DragWrap=h,window.customElements.define("drag-wrap",h))}t=new WeakMap,e=new WeakMap;export{m as i};
